---
id: пример сравнения-как-использовать-микронавтов
url: comparison/java/how-to-use-micronaut-comparison-sample
title: "Как использовать образец сравнения Micronaut"
weight: 30
description: "В статье описывается пример сравнения GroupDocs, созданный с помощью Micronaut Framework."
keywords: "Micronaut Framework, Сравнение документов, Сравнение файлов, Библиотека сравнения для Micronaut Framework"
productName: GroupDocs.Comparison для Java
hideChildren: False
структурированные данные:
шоуОрганизация: True
заявление:
имя: Word, Pdf, библиотека сравнения Excel
        description: "Продукт позволяет сравнивать файлы Word, Pdf и Excel."
код продукта: сравнение
Платформа продукта: Java
как:
название: Как использовать Micronaut Framework для сравнения файлов
        description: "Узнайте, как использовать Micronaut Framework для сравнения документов"
шаги:
- название: Используемые технологии
text: Описание технологий, которые используются в приложении
- name: Описание архитектуры приложения
текст: Краткое описание архитектуры приложения
- название: Сборка и запуск приложения
текст: Способы запуска приложения с помощью IDE или CLI.
- название: Ключевые места внутри приложения
текст: Реализация наиболее важных частей в приложении
---
[GroupDocs.Comparison](https://products.groupdocs.com/comparison) — самая гибкая, мощная и простая в использовании библиотека Java, созданная для разработки приложений для сравнения документов в среде Java. Micronaut — это современная полнофункциональная платформа на основе jvm для создания модульных, легко тестируемых микросервисных и бессерверных приложений. Объединив их вместе, вы можете легко разработать мощное и современное приложение на основе Java для сравнения документов Word и Pdf, фотографий и изображений, презентаций PowerPoint, чертежей AutoCad, файлов XML, MSG, JSON, TXT и многого другого [поддерживаемые форматы файлов](/comparison/ java/поддерживаемые форматы документов/). В статье вы прочтете о примере приложения для сравнения, исходники которого совершенно бесплатны и доступны на [странице GitHub](https://github.com/groupdocs-comparison/GroupDocs.Comparison-for-Java/tree/a5e2a25/Demos/ Микронавт)

### Используемые технологии

1. Kotlin — современный язык программирования, который делает разработчиков счастливее. Полностью совместим с библиотеками Java.
2. Micronaut — фреймворк на основе JVM для создания легких модульных приложений.
3. [GroupDocs.Comparison API](https://products.groupdocs.com/comparison/) — самая гибкая и современная библиотека сравнения для Java, Kotlin и .NET
4. Thymeleaf — современный механизм шаблонов Java на стороне сервера как для веб-сред, так и для автономных сред.

### Описание архитектуры приложения

* `config` — классы, которые используются для сопоставления конфигурации приложения.
* `manager` - Помощники, например менеджер для работы с путями к файлам
* `model` - Классы модели запросов и ответов
* `modules` - Контроллеры и их bean-компоненты
* `usecase` - бизнес-логика

#### Лишние файлы

В источниках:

* `Application.kt` - точка входа приложения
* `Defaults.kt` - свойства, которые используются как значения по умолчанию для опций конфигурации

В ресурсах:

* `application.conf` - конфигурация приложения
* `logback.xml` - конфигурация системы логирования

### Сборка и запуск приложения

#### Использование IDE

Точка входа в приложение находится в файле Application.kt. Для запуска приложения необходимо запустить функцию `main`. Это можно сделать с помощью любой IDE.

#### Использование командной строки

Вы можете легко запустить образец с помощью CLI, выполнив следующую команду

<script src="https://gist.github.com/groupdocs-comparison-gists/6987202c524f6c430eae2669bad8c64b.js"></script>

Приложение будет запущено с использованием оболочки gradle, которая находится в каталоге `gradle`. Откройте [http://localhost:8080/comparer](http://localhost:8080/comparison) в своем любимом веб-браузере, чтобы увидеть пользовательский интерфейс.

Создать архив дистрибутива так же просто, как запустить приложение:

<script src="https://gist.github.com/groupdocs-comparison-gists/a57bf4fbc4e6aaeee637e5daf4fa5824.js"></script>

После этого перейдите в каталог `.\build\distributions\` и вы найдете следующие файлы дистрибутива:

* сравнение-микронавт-22.3.tar
* сравнение-микронавт-22.3.zip

У обоих есть каталог bin со сценариями для запуска приложения и каталог lib, содержащий все библиотеки приложений.

### Ключевые места внутри приложения

#### Контроллеры и bean-компоненты

Внутри пакета `mudules` находятся подпакеты. Каждый из них обрабатывает один запрос от клиента. Давайте рассмотрим подпакет `compare` в качестве примера.

В пакете два файла:

1. `CompareController.kt` - содержит класс, который кеширует запрос к URL `/compare`

<script src="https://gist.github.com/groupdocs-comparison-gists/ea8d8e0466e35d7e1c21b97f5b1a658b.js"></script>

Цели класса — поймать запрос, извлечь параметры, вызвать метод bean-компонента и вернуть объект ответа, созданный bean-компонентом.
2. `CompareBean.kt` - он использует варианты использования и переданные аргументы для создания объекта ответа.
Первое, что делает bean-компонент, это проверяет, находятся ли пути запросов внутри разрешенных каталогов. Компонент использует PathManager для проверки.

<script src="https://gist.github.com/groupdocs-comparison-gists/80121384a48c0bd18adf82471ec06158.js"></script>

Второе — проверка того, что запрошенные файлы поддерживаются образцом. Компонент использует специальный вариант использования: `AreFilesSupportedUseCase`.

<script src="https://gist.github.com/groupdocs-comparison-gists/d967ad8ff4850452d20be766fc80e540.js"></script>

Третий шаг — создание пути к файлу, в котором будет сохранен результирующий документ.

<script src="https://gist.github.com/groupdocs-comparison-gists/e5fbb26f52bd2a20e6ba7e918761bc60.js"></script>

Образец использует временные файлы, чтобы быть более понятным. Образец легко изменить, чтобы вместо него использовались потоки ввода-вывода. Путь к временному каталогу можно настроить в `application.conf`. По умолчанию используется системный каталог

На следующем шаге `CompareDocumentsUseCase` используется для сравнения исходного и целевого документов и сохранения файла результатов. Возвращает список изменений, которые будут отправлены клиенту.

<script src="https://gist.github.com/groupdocs-comparison-gists/8c38027c876bcdb257a410ed9ed295b6.js"></script>

Еще одним важным шагом является получение входных потоков страниц в результирующем документе с помощью RetrieveLocalFilePagesStreamUseCase. Эти страницы будут отображаться на стороне клиента.

<script src="https://gist.github.com/groupdocs-comparison-gists/3a9ae7912f345b02e45a2469287ffed6.js"></script>

И последний шаг — сопоставление объектов сравнения `ChangeInfo`, которые представляют каждое изменение в документе в модели ответов, которые должны быть отправлены клиенту.

#### Понимание вариантов использования

Usecase — это класс, у которого есть только одна цель. Варианты использования должны быть просты для тестирования и не должны иметь состояния. В примере каждый вариант использования аннотируется с помощью аннотации `@Bean`. Это означает, что они будут внедрены в контроллеры и другие bean-компоненты с помощью встроенного в Micronaut Framework механизма. Таким же образом будут разрешены аргументы конструкторов вариантов использования.

Давайте рассмотрим `CompareDocumentsUseCase` в качестве примера:

В сценарии использования оператор `invoke` переопределен, чтобы можно было использовать объект варианта использования как функцию. Основная цель варианта использования — сравнить исходный и целевой документы с сохранением результирующего документа.

<script src="https://gist.github.com/groupdocs-comparison-gists/a73539b2fdb66f8cde9495beb47d5fc5.js"></script>

Параметрами варианта использования являются исходный документ, целевой документ и выходной поток. Он сравнивает документы с помощью библиотеки [GroupDocs.Comparison](https://products.groupdocs.com/comparison/java) и сохраняет результат в указанный поток. При желании он принимает пароли для каждого документа.

Библиотека сравнения используется для сравнения документов в образце. Он очень прост в использовании, так что вы можете сравнить любые документы всего в несколько строк кода:

1. Создайте экземпляр объекта `Comparer`, передающего путь или поток исходного документа.
В качестве альтернативы вы можете настроить Comparer, используя `LoadOptions`, чтобы интерпретировать первый аргумент как исходный текст для процесса сравнения. Также он имеет свойство пропускать каталоги со специфическими для документа шрифтами. При желании вы можете указать пароль для исходного документа с помощью специального свойства объекта `LoadOptions`. Comparer реализует интерфейс Java Closeable, поэтому при работе с ним рекомендуется использовать try-with-resources.

<script src="https://gist.github.com/groupdocs-comparison-gists/cded4b9f8a4f1fd1ec4ae1de61c3b15a.js"></script>

2. Используя метод «добавить» компаратора, предоставьте второй документ или текст для сравнения. В метод можно передать тот же параметр `LoadOptions` со всеми его свойствами. Более того, [API GroupDocs.Comparison](https://products.groupdocs.com/comparison/java/) поддерживает сравнение нескольких документов. Чтобы использовать его, просто добавьте больше целевых документов, используя метод «добавить» компаратора.

<script src="https://gist.github.com/groupdocs-comparison-gists/180ae9b27854c4b11dde7854e6ead725.js"></script>

3. Последнее, что вам нужно сделать, это вызвать метод `compare`, чтобы начать сравнение. Он принимает объект `CompareOptions` в качестве второго аргумента для настройки процесса. Здесь показаны лишь некоторые возможности библиотеки. В приведенном выше коде компаратор настроен на отображение удаленного контента, обнаружение изменений стилей и вычисление координат каждого изменения. Для настройки доступно гораздо больше параметров. Например, вы можете включить создание сводной страницы, изменить уровень чувствительности сравнения, отключить некоторые типы изменений, настроить стили, которые будут использоваться для выделения изменений и многое другое. Читайте о них [в документации](/comparison/java/getting-started/).
Метод `comparer.getChanges()` используется в конце блока `apply` для получения списка изменений.

### Получите бесплатную лицензию API

Некоторые возможности сравнения, такие как чувствительность сравнения, создание итоговой страницы и т. д., доступны только при наличии лицензии. Вы можете получить [бесплатную временную лицензию](https://purchase.groupdocs.com/temporary-license), чтобы использовать API без ограничений на пробную версию.

### Бесплатное онлайн-приложение
Вы можете проверить алгоритм сравнения с помощью мощных бесплатных приложений.
Попробуйте сравнить свои документы DOC или DOCX, XLS или XLSX, PPT или PPTX, PDF, EML, EMLX, MSG, DWG, DXF и другие с бесплатным онлайн-приложением для сравнения GroupDocs (https://products.groupdocs.app). /сравнение).

### Смотрите также

* Как [сравнить документы](/comparison/java/how-to-compare-documents-in-the-easiest-way) самым простым способом
* Как [сравнить файлы](/comparison/java/how-to-compare-files-in-java-or-kotlin) в Java или Kotlin
* Как [сравнивать изображения](/comparison/java/how-to-compare-images-using-java-or-kotlin) с помощью Java или Kotlin
* Как [использовать Ktor Comparison](/comparison/java/how-to-use-ktor-comparison-sample) Образец
* Как [показать предварительный просмотр чертежей AutoCAD] (/comparison/java/how-to-show-autocad-drawings-preview-in-kotlin-compose-application) в приложении kotlin compose
* Как [сравнить текст, Word или PDF](/comparison/java/how-to-compare-text-word-pdf-in-java-or-kotlin) в Java или Kotlin

